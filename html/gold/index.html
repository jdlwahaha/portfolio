<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="icon" type="image/png" href="../../img/icon.png"/>
    <title>Gold</title>
    <link rel="stylesheet" href="../../css/animation.css">
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/font-color.css">
    <link rel="stylesheet" href="../../css/box.css">
    <link rel="stylesheet" href="../../css/nav.css">
    <link rel="stylesheet" href="../../css/desktop-nav.css">
	<script src="../../lib/jquery-3.5.1.min.js"></script>
	<script src="../../js/script.js"></script>
</head>


<style>
    .description { 
        display: inline-block;
        margin-right: 2rem; 
        margin-top: 1rem;
        margin-bottom: 1rem;
        vertical-align: top;
    }

</style>


<body>
	<header><!-- jQuery generated --></header>

	<section id="mainContent">
        <div id="main">
	
			<section class="box">
                <div class="box-content">
                    <p class="">
                        <strong><a class="blue" target="_blank" href="https://www.vbce.ca/_next/data/A5f93_X-JnpHj3sXQ_IJh/gold-silver/1-1-oz-gold-bar.json?id=1-1-oz-gold-bar">Total: </a> </strong>

                        <span class="" id="cost"></span> &#128184; 
                    </p>
                    <hr>
                   
                    <div id="list"><!-- jQuery generated --></div>

                  
                </div>
            </section>

		</div>
	
		<footer><!-- jQuery generated --></footer>
	</section>

	
</body>
</html>

<script>
(function () {


    $.getJSON('../../data/gold/gold.json', function (golds) {

        let html = ``;

        const cost = readablePrice(getTotalCost(golds));
        $('#cost').append(`${cost}`);

        golds.map((gold, i) => { 
            let cssClass = "description"; 

            if (i==0) { 
                cssClass += ' first';
            } else if (i=== golds.length-1) { 
                cssClass += ' last';
            }

            html += `
             
                <div class="${cssClass}">
                    <div>
                        <strong>${gold.date}</strong>
                    </div>
                    <div>
                        Price: <strong class="green">${readablePrice(gold.price)}</strong>
                    </div>
                    <div class="imageblock">
                        <image src="../../data/gold/${gold.filename}" width="300"/>
                    </div>

                </div> 
                    
            `;


        })
        $('#list').append(html);

    });


     function getTotalCost(golds) { 
        const TAX = 1; 

        let sum = 0; 
        golds.map(i => {sum += i.price}); 

        return (sum * TAX);
    }

    function readablePrice(number) { 
        return number.toLocaleString('en-US', {
            style: 'currency',
            currency: 'USD',
        });
    }

})();
</script>